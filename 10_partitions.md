# 11_partitions.md — Disk Partitioning & Mounting

## 🧱 مقدمة
الـ Partitioning هو عملية تقسيم الهارد إلى أجزاء منطقية (partitions) يمكن للنظام التعامل معها.  
كل جزء ممكن يُستخدم لتخزين ملفات، تثبيت نظام تشغيل، أو swap.

---

## 💡 أنواع الأقسام (Partitions)

| النوع       | الوصف                                                             |
|-------------|-------------------------------------------------------------------|
| Primary     | القسم الرئيسي (حتى 4 أقسام فقط بدون LVM)                         |
| Extended    | نوع خاص يحتوي أقسام من نوع Logical                               |
| Logical     | أقسام داخل الـ Extended (للتغلب على حد الـ 4 أقسام الأساسية)     |
| Swap        | يستخدمه النظام كذاكرة مؤقتة (virtual memory)                    |

---

## ⚙️ أدوات إدارة الأقراص

| الأداة       | الاستخدام                           |
|--------------|--------------------------------------|
| `lsblk`       | عرض الأقراص والأقسام بشكل شجري       |
| `fdisk`       | أداة نصية لإنشاء وتعديل الأقسام     |
| `parted`      | أداة متقدمة للتعامل مع الأقراص الكبيرة |
| `mkfs`        | لإنشاء نظام ملفات (ext4, xfs, ...)  |
| `blkid`       | عرض UUID ونوع نظام الملفات           |
| `mount` / `umount` | تركيب/فصل الأقراص                |
| `df -h`       | عرض استخدام الأقراص                 |

---

## 🛠 خطوات تقسيم قرص جديد يدويًا

### 1. التحقق من القرص:
```bash
lsblk
sudo fdisk /dev/sdX
```

### 2. داخل fdisk:
- `n` لإنشاء قسم جديد
- `t` لتغيير نوع القسم (مثلاً `82` لـ swap)
- `w` لحفظ التغييرات

### 3. عمل فورمات للقسم:
```bash
sudo mkfs.ext4 /dev/sdX1
```

### 4. إنشاء نقطة تركيب (Mount Point):
```bash
sudo mkdir /mnt/mydata
```

### 5. تركيب القسم مؤقتًا:
```bash
sudo mount /dev/sdX1 /mnt/mydata
```

---

## 🔁 جعل التركيب دائم عبر fstab

أضف السطر التالي في `/etc/fstab`:

```
UUID=xxxxx  /mnt/mydata  ext4  defaults  0  2
```

يمكن معرفة UUID باستخدام:
```bash
sudo blkid
```

---

## 🔄 swap partition

### تفعيل:
```bash
sudo mkswap /dev/sdX2
sudo swapon /dev/sdX2
```

### إضافته لـ fstab:
```
UUID=xxxxx  none  swap  sw  0  0
```

---

## ⚠️ تنبيهات

- أي خطأ في `fstab` ممكن يمنع النظام من الإقلاع.
- تأكد من اختبار الأقسام يدويًا قبل إضافتها في fstab.
- لا تستخدم `umount` بدون التأكد أن القسم لا يُستخدم.